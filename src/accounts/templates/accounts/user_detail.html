{% extends "base.html" %}
{% load i18n gravatar %}

{% block head_js %}
  {% include "pizza-chart.html" with chart_div="collabs" chart_height=300 %}
  {% include "pizza-chart.html" with chart_div="collabs2" chart_height=300 %}
{% endblock %}

{% block main-content %}

  <div id="user-profile" class="row">
    <div class="vcard col-lg-3 col-md-3 col-sm-4">
      <div class="thumbnail">
        {% gravatar user_.email 200 %}
      </div>

      <h1>
        <span>{{ user_.get_full_name }}</span>
        <em>{{ user_.username }}</em>
      </h1>

      {% ifequal request.user user_ %}
        <a class="btn btn-info" href="{% url 'user_profile_update' user_ %}"><span class="glyphicon glyphicon-pencil"></span>&nbsp;&nbsp;{% trans "update your profile"|title %}</a>
      {% endifequal %}

      <div class="divider"></div>
      {% if request.user.is_active %}
        <ul class="unstyled-list">
        {% for email in request.user.emails.iterator %}
          <li><span class="icon-envelope icon-fixed-width"></span> {{ email.address }}</li>
        {% endfor %}
        </ul>
        <div class="divider"></div>
      {% endif %}

      <ul class="unstyled-list">
        {% if user_.institution or user_.role %}
        <li>
          <span class="icon-briefcase icon-fixed-width"></span>
          {{ user_.role }}
          {% if user_.institution and user_.role %}-{% endif %}
          {{ user_.institution }}
        </li>
        {% endif %}
      {% if request.user.is_active %}
        {% if user_.twitter %}
        <li><span class="icon-twitter icon-fixed-width"></span> {{ user_.twitter }}</li>
        {% endif %}
        {% if user_.facebook %}
        <li><span class="icon-facebook icon-fixed-width"></span> {{ user_.facebook }}</li>
        {% endif %}
        {% if user_.google_talk %}
        <li><span class="icon-google-plus icon-fixed-width"></span> {{ user_.google_talk }}</li>
        {% endif %}
        {% if user_.webpage %}
        <li><span class="icon-link icon-fixed-width"></span> {{ user_.webpage }}</li>
        {% endif %}
      {% endif %}
      </ul>
    </div>

    <div class="col-lg-5 col-md-5 col-sm-8">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{% trans "Contributions by Area" %}</h3>
        </div>
        <div class="panel-body">
          <div id="collabs"></div>
        </div>
      </div>
    </div>


    <div class="col-lg-4 col-md-4 col-sm-8 col-lg-offset-0 col-md-offset-0 col-sm-offset-4">
      <div class="panel panel-default">
        <div class="panel-heading">
          <h3 class="panel-title">{% trans "Mailing list Participation" %}</h3>
        </div>
        <div class="panel-body">
          <div id="collabs2"></div>
        </div>
      </div>
    </div>

    </div>
    <div class="row">
      <div class="col-lg-6 col-md-6 col-sm-12">
        <h3>{% trans "Latest posted" %} </h3>
        <ul class="message-list">
        {% for doc in emails %}
          {% include "message-preview.html" %}
        {% empty %}
          <li>{% trans "There are no posts by this user so far." %}</li>
        {% endfor %}
        </ul>
      </div>

      <div class="col-lg-6 col-md-6 col-sm-12">
        <h3>{% trans "Community inside participations" %}</h3>
        <ul class="message-list">
        {% for doc in docs %}
          {% include "message-preview.html" %}
        {% empty %}
          <li>{% trans "No contributions of this user so far." %}</li>
        {% endfor %}
        </ul>
      </div>

  </div>

{% endblock %}
