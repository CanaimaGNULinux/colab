{% extends "base.html" %}
{% load i18n superarchives %}

{% block main-content %}
  <div class="row">
    <div class="col-lg-2">
      <h2>{% trans "Search" %}</h2>
    </div>
    <span class="pull-right quiet">
      {{ docs.numFound }} {% trans "documents found in" %} 
      {{ docs.QTime|floatformat:3 }} {% trans "seconds" %}
    </span>
  </div>
  <hr/>

  <div class="row">
    <div class="col-lg-2">
      <h3>{% trans "Filters" %}</h3>

      <h4>{% trans "Types" %}</h4>

      <ul class="none indent">
        <li {% ifequal type "wiki" %} title="{% trans "Remove filter" %}" {% endifequal %}>
          <span class="glyphicon glyphicon-book"></span>
          <a href="{% ifnotequal type "wiki" %} {% append_to_get type='wiki' %} {% else %} {% append_to_get type="" %} {% endifnotequal %}">{% trans "Wiki" %}</a>
        </li>
        <li {% ifequal type "thread" %} title="{% trans "Remove filter" %}" {% endifequal %}>
          <span class="glyphicon glyphicon-envelope"></span>
          <a href="{% ifnotequal type "thread" %} {% append_to_get type='thread' %} {% else %} {% append_to_get type="" %} {% endifnotequal %}">{% trans "Discussion" %}</a>
        </li>
        <li {% ifequal type "ticket" %} title="{% trans "Remove filter" %}" {% endifequal %}>
          <span class="glyphicon glyphicon-tag"></span>
          <a href="{% ifnotequal type "ticket" %} {% append_to_get type='ticket' %} {% else %} {% append_to_get type="" %} {% endifnotequal %}">{% trans "Ticket" %}</a>
        </li>
        <li {% ifequal type "changeset" %} title="{% trans "Remove filter" %}" {% endifequal %}>
          <span class="glyphicon glyphicon-align-right"></span>
          <a href="{% ifnotequal type "changeset" %} {% append_to_get type='changeset' %} {% else %} {% append_to_get type="" %} {% endifnotequal %}">{% trans "Changeset" %}</a>
        </li>
      </ul>
    </div>
  
    <div class="col-lg-10">
      <ul class="none indent">
      {% for doc in docs  %}
        {% include "message-preview.html" %}
      {% empty %}
        <li class="text-center">
          {% trans "No results for your search." %}
        </li>
      {% endfor %}
      </ul>

      {% if docs.numFound %}
      <div>
        <span>
          {% if docs.has_previous %}
            <a href="{% append_to_get p=docs.previous_page_number %}">{% trans "Previous" %}</a>
          {% endif %}

          <span>
            {% trans "Page" %} {{ docs.page_num }} {% trans "of" %} {{ docs.num_of_pages }}
          </span>

          {% if docs.has_next %}
            <a href="{% append_to_get p=docs.next_page_number %}">{% trans "Next" %}</a>
          {% endif %}
        </span>
      </div>
    </div>
    {% endif %}
  </div>

{% endblock %}
